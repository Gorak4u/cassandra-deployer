# This file is managed by Puppet.
# This profile is for use with the `cassandra-stress` tool to generate a large dataset.
# It defines a new table `users_large` within the `my_app` keyspace.

keyspace: my_app
table: users_large

keyspace_definition: |
  CREATE KEYSPACE IF NOT EXISTS my_app WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};

# The table schema, including a large 'data' blob to increase row size.
table_definition: |
  CREATE TABLE IF NOT EXISTS my_app.users_large (
    user_id uuid PRIMARY KEY,
    first_name text,
    last_name text,
    email text,
    created_at timestamp,
    data blob
  );

# Specifies how to generate data for each column.
columnspec:
  - name: user_id
    population: uniform(1..10000000)
  - name: first_name
    size: uniform(5..15)
  - name: last_name
    size: uniform(5..20)
  - name: email
    size: uniform(15..30)
  - name: created_at
  - name: data
    size: uniform(800..900)

# Defines the query to run for writes.
insert:
  partitions: fixed(1)
  batchtype: UNLOGGED

# Defines named queries that can be called from the command line.
queries:
  read_one: 
    cql: "SELECT * FROM users_large where user_id = ?"
    fields: samerow
