# This file is managed by Puppet. DO NOT EDIT.

# JVM Heap size
-Xms<%= @max_heap_size %>
-Xmx<%= @max_heap_size %>

# General JVM settings
-XX:+UseThreadPriorities
-XX:ThreadPriorityPolicy=42
-XX:+HeapDumpOnOutOfMemoryError
-XX:+AlwaysPreTouch

# Per-thread stack size
-Xss256k

# Garbage Collection
-XX:+Use<%= @gc_type %>

# Additional GC-specific and override arguments
<%- @extra_jvm_args.each do |arg| -%>
<%= arg %>
<%- end -%>

# Java 11+ compatibility flags
-XX:+IgnoreUnrecognizedVMOptions

# JMX options
-Djava.rmi.server.hostname=<%= @listen_address %>
-Dcom.sun.management.jmxremote.port=7199
-Dcom.sun.management.jmxremote.rmi.port=7199
-Dcom.sun.management.jmxremote.ssl=false
<%- if @manage_jmx_security -%>
-Dcom.sun.management.jmxremote.authenticate=true
-Dcom.sun.management.jmxremote.password.file=<%= @jmx_password_file_path %>
-Dcom.sun.management.jmxremote.access.file=<%= @jmx_access_file_path %>
<%- else -%>
-Dcom.sun.management.jmxremote.authenticate=false
<%- end -%>

# JMX Exporter for Prometheus
<%- if @manage_jmx_exporter -%>
-javaagent:<%= @jmx_exporter_jar_target %>=<%= @jmx_exporter_port %>:<%= @jmx_exporter_config_target %>
<%- end -%>
