# @summary Handles package installation for Cassandra and dependencies.
# This file is managed by Puppet.
class cassandra_pfpt::install inherits cassandra_pfpt {
  user { $user:
    ensure     => 'present',
    system     => true,
  }
  group { $group:
    ensure => 'present',
    system => true,
  }

  contain 'cassandra_pfpt::repo'

  package { $package_dependencies:
    ensure  => 'present',
    require => Class['cassandra_pfpt::java'],
  }

  $cassandra_ensure = $cassandra_version ? {
    undef   => 'present',
    default => $cassandra_version,
  }

  package { 'cassandra':
    ensure  => $cassandra_ensure,
    require => [Class['cassandra_pfpt::java'], User[$user], Class['cassandra_pfpt::repo']],
    before  => Class['cassandra_pfpt::config'],
  }
  package { 'cassandra-tools':
    ensure  => $cassandra_ensure,
    require => Package['cassandra'],
  }
}
