
export const puppetCode = {
  root: {
    'metadata.json': [
      '{',
      '  "name": "ggonda-cassandra",',
      '  "version": "1.0.0",',
      '  "author": "ggonda",',
      '  "summary": "Production-ready Puppet profile to manage Apache Cassandra at scale.",',
      '  "license": "Apache-2.0",',
      '  "source": "https://github.com/ggonda/profile_ggonda_cassandra",',
      '  "project_page": "https://github.com/ggonda/profile_ggonda_cassandra",',
      '  "issues_url": "https://github.com/ggonda/profile_ggonda_cassandra/issues",',
      '  "dependencies": [',
      '    {',
      '      "name": "puppetlabs/stdlib",',
      '      "version_requirement": ">= 6.0.0 < 9.0.0"',
      '    },',
      '    {',
      '      "name": "puppetlabs/apt",',
      '      "version_requirement": ">= 7.0.0 < 9.0.0"',
      '    },',
      '    {',
      '      "name": "puppetlabs/firewall",',
      '      "version_requirement": ">= 2.7.0 < 4.0.0"',
      '    }',
      '  ],',
      '  "operatingsystem_support": [',
      '    {',
      '      "operatingsystem": "RedHat",',
      '      "operatingsystemrelease": [ "7", "8", "9" ]',
      '    },',
      '    {',
      '      "operatingsystem": "CentOS",',
      '      "operatingsystemrelease": [ "7", "8", "9" ]',
      '    },',
      '    {',
      '      "operatingsystem": "Debian",',
      '      "operatingsystemrelease": [ "9", "10", "11" ]',
      '    },',
      '    {',
      '      "operatingsystem": "Ubuntu",',
      '      "operatingsystemrelease": [ "18.04", "20.04", "22.04" ]',
      '    }',
      '  ],',
      '  "requirements": [',
      '    {',
      '      "name": "puppet",',
      '      "version_requirement": ">= 6.0.0 < 8.0.0"',
      '    }',
      '  ]',
      '}'
    ].join('\n'),
  },
  manifests: {
    'init.pp': [
      '# @summary Manages installation and configuration of Apache Cassandra.',
      '#',
      '# @param cassandra_version Version of Cassandra to install.',
      '# @param java_package Name of the Java package to install.',
      '# @param cluster_name Name of the Cassandra cluster.',
      '# @param seeds Comma-separated list of seed node IP addresses.',
      '# @param datacenter The datacenter name for this node.',
      '# @param rack The rack name for this node.',
      '# @param use_g1_gc Whether to use the G1GC garbage collector.',
      '# @param use_shenandoah_gc Whether to use the Shenandoah garbage collector.',
      '# @param racks A hash mapping datacenters to racks.',
      '# @param concurrent_compactors Number of concurrent compactors.',
      '# @param compaction_throughput_mb_per_sec Compaction throughput in MB/s.',
      '# @param tombstone_warn_threshold Tombstone warning threshold.',
      '# @param tombstone_failure_threshold Tombstone failure threshold.',
      '# @param sysctl_settings A hash of sysctl settings to apply.',
      '# @param limits_settings A hash of user limits to apply.',
      '# @param manage_repo Whether to manage the Cassandra repository.',
      '# @param manage_firewall Whether to manage firewall rules for Cassandra.',
      'class cassandra (',
      '  # Main class parameters, can be used to override params.pp',
      '  Boolean $use_java11                     = $cassandra::params::use_java11,',
      '  Optional[Boolean] $use_g1_gc            = $cassandra::params::use_g1_gc,',
      '  Optional[Boolean] $use_shenandoah_gc    = $cassandra::params::use_shenandoah_gc,',
      '  Hash $racks                             = $cassandra::params::racks,',
      '  # cassandra.yaml main settings',
      '  Integer $concurrent_compactors          = $cassandra::params::concurrent_compactors,',
      '  Integer $compaction_throughput_mb_per_sec = $cassandra::params::compaction_throughput_mb_per_sec,',
      '  Integer $tombstone_warn_threshold       = $cassandra::params::tombstone_warn_threshold,',
      '  Integer $tombstone_failure_threshold    = $cassandra::params::tombstone_failure_threshold,',
      '  # OS Tuning settings',
      '  Hash $sysctl_settings                   = $cassandra::params::sysctl_settings,',
      '  Hash $limits_settings                   = $cassandra::params::limits_settings,',
      '  # New parameters for repo and firewall management',
      '  Boolean $manage_repo                    = $cassandra::params::manage_repo,',
      '  Boolean $manage_firewall                = $cassandra::params::manage_firewall,',
      ') inherits cassandra::params {',
      '',
      '  # The main class now simply includes the component classes.',
      '  # This makes the module more modular and easier to understand.',
      '  contain cassandra::java',
      '  contain cassandra::install',
      '  contain cassandra::config',
      '  if $manage_firewall {',
      '    contain cassandra::firewall',
      '  }',
      '  contain cassandra::service',
      '',
      '  # Ensure classes are applied in the correct order.',
      '  Class[\'cassandra::java\'] ->',
      '  Class[\'cassandra::install\'] ->',
      '  Class[\'cassandra::config\'] ~>',
      '  Class[\'cassandra::service\']',
      '',
      '  if $manage_firewall {',
      '    Class[\'cassandra::config\'] -> Class[\'cassandra::firewall\']',
      '  }',
      '}',
    ].join('\n'),
    'params.pp': [
      '# @summary Default parameters for the Cassandra profile.',
      '# This class should not be called directly.',
      'class cassandra::params {',
      '  # cassandra.yaml main settings',
      '  $cassandra_version         = \'4.1.10-1\'',
      '  $java_version              = \'11\'',
      '  $cluster_name              = \'ggonda-cass-cluster\'',
      '  $seeds                     = \'10.93.16.206,10.93.16.127,10.93.17.191\'',
      '  $listen_address            = $facts[\'networking\'][\'ip\']',
      '  $concurrent_compactors          = 2',
      '  $compaction_throughput_mb_per_sec = 16',
      '  $tombstone_warn_threshold       = 1000',
      '  $tombstone_failure_threshold    = 100000',
      '',
      '  # cassandra.yaml security settings',
      '  $cassandra_password        = \'PP#C@ss@ndr@000\'',
      '  $ssl_enabled               = true',
      '  $keystore_path             = \'/etc/pki/tls/certs/etc/keystore.jks\'',
      '  $keystore_password         = \'ChangeMe\'',
      '  $truststore_path           = \'/etc/pki/ca-trust/extracted/java/cacerts\'',
      '  $truststore_password       = \'changeit\'',
      '  $internode_encryption      = \'all\'',
      '',
      '  # cassandra-rackdc.properties settings',
      '  # Default values for rack and DC, will be overridden by GCE facts if available.',
      '  $datacenter                = \'dc1\'',
      '  $rack                      = \'rack1\'',
      '  $racks                     = {}',
      '',
      '  # cassandra-env.sh / jvm.options settings',
      '  $max_heap_size             = \'3G\'',
      '  $use_java11                = $java_version ? { \'11\' => true, default => false }',
      '  $use_g1_gc                 = $java_version ? { \'11\' => true, default => false }',
      '  $use_shenandoah_gc         = false',
      '  $gc_type                   = \'G1GC\'',
      '',
      '  # Directory and User settings',
      '  $data_dir                  = \'/var/lib/cassandra/data\'',
      '  $commitlog_dir             = \'/var/lib/cassandra/commitlog\'',
      '  $cassandra_user            = \'cassandra\'',
      '  $cassandra_group           = \'cassandra\'',
      '',
      '  # OS Tuning settings',
      '  $disable_swap              = false',
      '  $sysctl_settings           = {',
      '    \'vm.max_map_count\' => \'1048576\'',
      '  }',
      '  $limits_settings           = {',
      '    \'memlock\' => \'unlimited\',',
      '    \'nofile\'  => \'100000\',',
      '    \'nproc\'   => \'32768\',',
      '    \'as\'      => \'unlimited\',',
      '  }',
      '',
      '  # Operational settings',
      '  $replace_address           = \'\'',
      '  $enable_range_repair       = false',
      '  $manage_bin_dir            = \'/usr/local/bin\'',
      '',
      '  # Repository settings',
      '  $manage_repo               = true',
      '  $repo_baseurl              = \'https://repocache.nonprod.ppops.net/artifactory/apache-org-cassandra/\'',
      '  $repo_gpgkey               = \'https://repocache.nonprod.ppops.net/artifactory/apache-org-cassandra-gpg-keys/KEYS\'',
      '  $package_dependencies      = [\'jemalloc\',\'python3\',\'numactl\']',
      '',
      '  # Other internal settings',
      '  $change_password_cql       = \'/tmp/change_password.cql\'',
      '  $cqlsh_path_env            = \'/usr/bin:/usr/local/bin\'',
      '  $jamm_target               = \'/usr/share/cassandra/lib/jamm-0.3.2.jar\'',
      '  $jamm_source               = \'puppet:///modules/ggonda-cassandra/jamm-0.3.2.jar\'',
      '',
      '  # Firewall settings',
      '  $manage_firewall           = true',
      '}',
    ].join('\n'),
    'install.pp': [
      '# @summary Handles package installation for Cassandra and dependencies.',
      'class cassandra::install inherits cassandra::params {',
      '',
      '  # Ensure Cassandra user and group exist before anything else',
      '  user { $cassandra_user:',
      '    ensure     => \'present\',',
      '    system     => true,',
      '  }',
      '',
      '  group { $cassandra_group:',
      '    ensure => \'present\',',
      '    system => true,',
      '  }',
      '',
      '  # YUM Repo for Cassandra',
      '  if $manage_repo {',
      '    if $facts[\'os\'][\'family\'] == \'RedHat\' {',
      '      $os_release_major = regsubst($facts[\'os\'][\'release\'][\'major\'], \'^(\\d+).*$\', \'\\\\1\')',
      '      yumrepo { \'cassandra\':',
      '        descr    => "Apache Cassandra ${cassandra_version} for EL${os_release_major}",',
      '        baseurl  => "${repo_baseurl}",',
      '        gpgcheck => 0,',
      '        enabled  => 1,',
      '        gpgkey   => "${repo_gpgkey}",',
      '        repo_gpgcheck => 0,',
      '        skip_if_unavailable => 1,',
      '        priority => 99,',
      '        sslverify => 1,',
      '      }',
      '    } elsif $facts[\'os\'][\'family\'] == \'Debian\' {',
      '      include apt',
      '      apt::source { \'cassandra\':',
      '        location => $repo_baseurl,',
      '        release  => $facts[\'os\'][\'distro\'][\'codename\'],',
      '        repos    => \'main\',',
      '        key      => {',
      '          id     => \'F758CE318D77295D\', # Example key, should be managed securely',
      '          source => $repo_gpgkey,',
      '        },',
      '      }',
      '    }',
      '  }',
      '',
      '  # Install dependencies',
      '  package { $package_dependencies:',
      '    ensure => \'present\',',
      '  }',
      '',
      '  # Install Cassandra and tools',
      '  package { \'cassandra\':',
      '    ensure  => $cassandra_version,',
      '    require => Class[\'cassandra::java\'],',
      '  }',
      '',
      '  package { \'cassandra-tools\':',
      '    ensure  => $cassandra_version,',
      '    require => Package[\'cassandra\'],',
      '  }',
      '}',
    ].join('\n'),
    'config.pp': [
      '# @summary Manages all configuration files for Cassandra.',
      'class cassandra::config inherits cassandra::params {',
      '',
      '  # Determine rack and DC dynamically for GCE',
      '  if $facts.get(\'gce\') {',
      '    $dc = $facts[\'gce\'][\'instance\'][\'zone\']',
      '    if $racks.has_key($dc) {',
      '      $final_rack = $racks[$dc]',
      '    } else {',
      '      $final_rack = \'rack1\' # Default if no specific rack is defined for the DC',
      '    }',
      '  } else {',
      '    $dc = $datacenter',
      '    $final_rack = $rack',
      '  }',
      '',
      '  # Create Cassandra data and commitlog directories',
      '  file { [$data_dir, $commitlog_dir]:',
      '    ensure  => \'directory\',',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0700\',',
      '    require => Class[\'cassandra::install\'], # Ensure user/group exist',
      '  }',
      '',
      '  # Create .cassandra directory for cqlshrc',
      '  file { \'/root/.cassandra\':',
      '    ensure => \'directory\',',
      '    owner  => \'root\',',
      '    group  => \'root\',',
      '    mode   => \'0700\',',
      '  }',
      '',
      '  file { $jamm_target:',
      '    ensure  => \'file\',',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '    mode    => \'0644\',',
      '    source  => $jamm_source,',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  # Cassandra configuration files',
      '  file { \'/etc/cassandra/conf/cassandra.yaml\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/cassandra.yaml.erb\'),',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0644\',',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  file { \'/etc/cassandra/conf/cassandra-rackdc.properties\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/cassandra-rackdc.properties.erb\'),',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0644\',',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  file { \'/etc/cassandra/conf/jvm-server.options\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/jvm-server.options.erb\'),',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0644\',',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  file { \'/etc/cassandra/conf/jvm11-server.options\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/jvm11-server.options.erb\'),',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0644\',',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  file { \'/etc/cassandra/conf/jvm8-server.options\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/jvm8-server.options.erb\'),',
      '    owner   => $cassandra_user,',
      '    group   => $cassandra_group,',
      '    mode    => \'0644\',',
      '    require => Class[\'cassandra::install\'],',
      '  }',
      '',
      '  file { \'/root/.cassandra/cqlshrc\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/cqlshrc.erb\'),',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '    mode    => \'0600\',',
      '    require => File[\'/root/.cassandra\'],',
      '  }',
      '',
      '  # Deploy management scripts',
      '  file { $manage_bin_dir:',
      '    ensure => \'directory\',',
      '    owner  => \'root\',',
      '    group  => \'root\',',
      '    mode   => \'0755\',',
      '  }',
      '',
      '  [ \'cassandra-upgrade-precheck.sh\', \'cluster-health.sh\', \'repair-node.sh\',',
      '    \'cleanup-node.sh\', \'take-snapshot.sh\', \'drain-node.sh\', \'rebuild-node.sh\',',
      '    \'garbage-collect.sh\', \'assassinate-node.sh\', \'upgrade-sstables.sh\',',
      '    \'backup-to-s3.sh\', \'prepare-replacement.sh\', \'version-check.sh\',',
      '    \'cassandra_range_repair.py\', \'range-repair.sh\', \'robust_backup.sh\',',
      '    \'restore_from_backup.sh\', \'node_health_check.sh\', \'rolling_restart.sh\' ].each |$script| {',
      '    file { "${manage_bin_dir}/${script}":',
      '      ensure  => \'file\',',
      '      source  => "puppet:///modules/ggonda-cassandra/scripts/${script}",',
      '      owner   => \'root\',',
      '      group   => \'root\',',
      '      mode    => \'0755\',',
      '    }',
      '  }',
      '',
      '  # OS Tuning for Cassandra',
      '  if $disable_swap {',
      '    exec { \'swapoff -a\':',
      '      command  => \'/sbin/swapoff -a\',',
      '      unless   => \'/sbin/swapon -s | /bin/grep -qE "^/[^ ]+\\\\s+partition\\\\s+0\\\\s+0$"\',',
      '      path     => [\'/usr/bin\', \'/usr/sbin\', \'/bin\', \'/sbin\'],',
      '      before   => File[\'/etc/sysctl.d/99-cassandra.conf\'],',
      '    }',
      '    $merged_sysctl = $sysctl_settings + { \'vm.swappiness\' => 0 }',
      '  } else {',
      '    $merged_sysctl = $sysctl_settings',
      '  }',
      '',
      '  file { \'/etc/sysctl.d/99-cassandra.conf\':',
      '    ensure  => \'file\',',
      '    content => epp(\'ggonda-cassandra/sysctl.conf.epp\', { \'settings\' => $merged_sysctl }),',
      '    mode    => \'0644\',',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '    notify  => Exec[\'apply_sysctl_cassandra\'],',
      '  }',
      '',
      '  exec { \'apply_sysctl_cassandra\':',
      '    command     => \'/sbin/sysctl -p /etc/sysctl.d/99-cassandra.conf\',',
      '    path        => [\'/usr/bin\', \'/usr/sbin\', \'/bin\', \'/sbin\'],',
      '    refreshonly => true,',
      '  }',
      '',
      '  file { \'/etc/security/limits.d/cassandra.conf\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/cassandra_limits.conf.erb\'),',
      '    mode    => \'0644\',',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '  }',
      '}',
    ].join('\n'),
    'service.pp': [
      '# @summary Manages the Cassandra service, including password changes and range repair.',
      'class cassandra::service inherits cassandra::params {',
      '',
      '  # Cassandra service',
      '  service { \'cassandra\':',
      '    ensure     => running,',
      '    enable     => true,',
      '    hasstatus  => true,',
      '    hasrestart => true,',
      '  }',
      '',
      '  file { $change_password_cql:',
      '    ensure  => file,',
      '    content => "ALTER USER cassandra WITH PASSWORD \'${cassandra_password}\';\\\\n",',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '    mode    => \'0600\',',
      '  }',
      '',
      '  # Wait for Cassandra to start up before attempting to change password',
      '  exec { \'change_cassandra_password\':',
      '    command     => "cqlsh -u cassandra -p cassandra -f ${change_password_cql}",',
      '    path        => $cqlsh_path_env,',
      '    tries       => 12, # Try 12 times',
      '    try_sleep   => 10, # Wait 10 seconds between tries (total 2 minutes)',
      '    unless      => "cqlsh -u cassandra -p \'${cassandra_password}\' -e \'SELECT cluster_name FROM system.local;\' ${listen_address} >/dev/null 2>&1",',
      '    require     => Service[\'cassandra\'],',
      '  }',
      '',
      '  # Range Repair Service (Systemd)',
      '  $range_repair_ensure = $enable_range_repair ? { true => \'running\', default => \'stopped\' }',
      '  $range_repair_enable = $enable_range_repair ? { true => true, default => false }',
      '',
      '  file { \'/etc/systemd/system/range-repair.service\':',
      '    ensure  => \'file\',',
      '    content => template(\'ggonda-cassandra/range-repair.service.erb\'),',
      '    owner   => \'root\',',
      '    group   => \'root\',',
      '    mode    => \'0644\',',
      '    notify  => Exec[\'systemctl_daemon_reload_range_repair\'],',
      '  }',
      '',
      '  exec { \'systemctl_daemon_reload_range_repair\':',
      '    command     => \'/bin/systemctl daemon-reload\',',
      '    path        => [\'/usr/bin\', \'/bin\'],',
      '    refreshonly => true,',
      '    before      => Service[\'range-repair\'],',
      '  }',
      '',
      '  service { \'range-repair\':',
      '    ensure    => $range_repair_ensure,',
      '    enable    => $range_repair_enable,',
      '    hasstatus => true,',
      '    hasrestart => true,',
      '    subscribe => File[\'/etc/systemd/system/range-repair.service\'],',
      '  }',
      '}',
    ].join('\n'),
    'java.pp': [
      '# @summary Manages Java installation for Cassandra.',
      'class cassandra::java inherits cassandra::params {',
      '',
      '  # Determine the correct Java package name based on the version and OS family',
      '  if $use_java11 {',
      '    $default_java_package = $facts[\'os\'][\'family\'] ? {',
      '      \'RedHat\' => \'java-11-openjdk-headless\',',
      '      \'Debian\' => \'openjdk-11-jre-headless\',',
      '      default  => fail("Unsupported OS family for Java 11 installation: ${facts[\'os\'][\'family\']}"),',
      '    }',
      '  } else {',
      '    $default_java_package = $facts[\'os\'][\'family\'] ? {',
      '      \'RedHat\' => \'java-1.8.0-openjdk-headless\',',
      '      \'Debian\' => \'openjdk-8-jre-headless\',',
      '      default  => fail("Unsupported OS family for Java 8 installation: ${facts[\'os\'][\'family\']}"),',
      '    }',
      '  }',
      '',
      '  # Use the Hiera-provided package name if it exists, otherwise use the default',
      '  $java_package_name = lookup(\'cassandra::java_package_name\', { default_value => $default_java_package })',
      '',
      '  package { $java_package_name:',
      '    ensure  => present,',
      '  }',
      '}',
    ].join('\n'),
    'firewall.pp': [
      '# @summary Manages firewall rules for Cassandra.',
      'class cassandra::firewall {',
      '',
      '  # Default Cassandra ports',
      '  $cassandra_ports = {',
      '    \'7000\' => \'Cassandra Internode\',',
      '    \'7001\' => \'Cassandra Internode SSL\',',
      '    \'7199\' => \'Cassandra JMX\',',
      '    \'9042\' => \'Cassandra CQL\',',
      '    \'9160\' => \'Cassandra Thrift\',',
      '  }',
      '',
      '  $cassandra_ports.each |$port, $comment| {',
      '    firewall { "100 allow ${comment} access":',
      '      dport  => $port,',
      '      proto  => \'tcp\',',
      '      action => \'accept\',',
      '    }',
      '  }',
      '}',
    ].join('\n'),
  },
  templates: {
    'cassandra.yaml.erb': [
      '# cassandra.yaml',
      '# Generated by Puppet from ggonda-cassandra/cassandra.yaml.erb. DO NOT EDIT.',
      '',
      'cluster_name: \'<%= @cluster_name %>\'',
      'num_tokens: 256',
      'listen_address: <%= @listen_address %>',
      'rpc_address: <%= @listen_address %>',
      'seed_provider:',
      '  - class_name: org.apache.cassandra.locator.SimpleSeedProvider',
      '    parameters:',
      '      - seeds: "<%= @seeds %>"',
      'endpoint_snitch: GossipingPropertyFileSnitch',
      'data_file_directories:',
      '  - <%= @data_dir %>',
      'commitlog_directory: <%= @commitlog_dir %>',
      'saved_caches_directory: /var/lib/cassandra/saved_caches',
      'authenticator: PasswordAuthenticator',
      'authorizer: CassandraAuthorizer',
      '<% if @ssl_enabled == true -%>',
      'server_encryption_options:',
      '  internode_encryption: <%= @internode_encryption %>',
      '  keystore: <%= @keystore_path %>',
      '  keystore_password: <%= @keystore_password %>',
      '  truststore: <%= @truststore_path %>',
      '  truststore_password: <%= @truststore_password %>',
      'client_encryption_options:',
      '  enabled: true',
      '  keystore: <%= @keystore_path %>',
      '  keystore_password: <%= @keystore_password %>',
      '<% end -%>',
      '<% if @replace_address != "" -%>',
      'replace_address_first_boot: <%= @replace_address %>',
      '<% end -%>',
      'concurrent_reads: 16',
      'concurrent_writes: 32',
      'concurrent_compactors: <%= @concurrent_compactors %>',
      'compaction_throughput_mb_per_sec: <%= @compaction_throughput_mb_per_sec %>',
      'tombstone_warn_threshold: <%= @tombstone_warn_threshold %>',
      'tombstone_failure_threshold: <%= @tombstone_failure_threshold %>',
    ].join('\n'),
    'cassandra-rackdc.properties.erb': [
      '# cassandra-rackdc.properties',
      '# Generated by Puppet from ggonda-cassandra/cassandra-rackdc.properties.erb',
      '# Used by GossipingPropertyFileSnitch to determine rack and datacenter for this node.',
      'dc=<%= @dc %>',
      'rack=<%= @final_rack %>',
    ].join('\n'),
    'jvm-server.options.erb': [
      '# jvm-server.options',
      '# Generated by Puppet from ggonda-cassandra/jvm-server.options.erb.',
      '# This file is for Cassandra 4.x and later.',
      '<% if @use_java11 -%>',
      '-Xms<%= @max_heap_size %>',
      '-Xmx<%= @max_heap_size %>',
      '<% if @use_g1_gc -%>',
      '-XX:+UseG1GC',
      '-XX:G1RSetUpdatingPauseTimePercent=5',
      '-XX:MaxGCPauseMillis=500',
      '<% end -%>',
      '<% if @use_shenandoah_gc -%>',
      '-XX:+UseShenandoahGC',
      '<% end -%>',
      '-XX:+HeapDumpOnOutOfMemoryError',
      '-Dcassandra.jmx.local.port=7199',
      '<% else -%>',
      '# Settings for Java 8',
      '-Xms4G',
      '-Xmx4G',
      '-XX:+UseConcMarkSweepGC',
      '-XX:+CMSParallelRemarkEnabled',
      '<% end -%>',
    ].join('\n'),
    'jvm8-server.options.erb': [
      '# jvm8-server.options for Cassandra on Java 8',
      '-Xms4G',
      '-Xmx4G',
      '-XX:+UseConcMarkSweepGC',
      '-XX:+CMSParallelRemarkEnabled',
    ].join('\n'),
    'jvm11-server.options.erb': [
      '# jvm11-server.options for Cassandra on Java 11+',
      '-Xms<%= @max_heap_size %>',
      '-Xmx<%= @max_heap_size %>',
      '<% if @gc_type == "G1GC" -%>',
      '-XX:+UseG1GC',
      '-XX:G1RSetUpdatingPauseTimePercent=5',
      '-XX:MaxGCPauseMillis=500',
      '<% else -%>',
      '-XX:+UseShenandoahGC',
      '<% end -%>',
    ].join('\n'),
    'cqlshrc.erb': [
      '[authentication]',
      'username = cassandra',
      'password = <%= @cassandra_password %>',
    ].join('\n'),
    'range-repair.service.erb': [
      '[Unit]',
      'Description=Cassandra Range Repair Service',
      '',
      '[Service]',
      'Type=simple',
      'User=cassandra',
      'Group=cassandra',
      'ExecStart=/usr/local/bin/range-repair.sh',
      'Restart=on-failure',
      '',
      '[Install]',
      'WantedBy=multi-user.target',
    ].join('\n'),
    'cassandra_limits.conf.erb': [
      '# Generated by Puppet',
      '# /etc/security/limits.d/cassandra.conf',
      '',
      '<% @limits_settings.each |$limit, $value| -%>',
      '<%= @cassandra_user %> - <%= $limit %> <%= $value %>',
      '<% end -%>',
    ].join('\n'),
    'sysctl.conf.epp': [
      '# Generated by Puppet',
      '# /etc/sysctl.d/99-cassandra.conf',
      '<% $settings.each |$key, $value| -%>',
      '<%= $key %> = <%= $value %>',
      '<% end -%>',
    ].join('\n'),
  },
  scripts: {
    'cassandra-upgrade-precheck.sh': '#!/bin/bash\n# Placeholder for cassandra-upgrade-precheck.sh\necho "Cassandra Upgrade Pre-check Script"',
    'cluster-health.sh': '#!/bin/bash\n# Placeholder for cluster-health.sh\necho "Cluster Health Script"',
    'repair-node.sh': '#!/bin/bash\n# Placeholder for repair-node.sh\necho "Repair Node Script"',
    'cleanup-node.sh': '#!/bin/bash\n# Placeholder for cleanup-node.sh\necho "Cleanup Node Script"',
    'take-snapshot.sh': '#!/bin/bash\n# Placeholder for take-snapshot.sh\necho "Take Snapshot Script"',
    'drain-node.sh': '#!/bin/bash\n# Placeholder for drain-node.sh\necho "Drain Node Script"',
    'rebuild-node.sh': '#!/bin/bash\n# Placeholder for rebuild-node.sh\necho "Rebuild Node Script"',
    'garbage-collect.sh': '#!/bin/bash\n# Placeholder for garbage-collect.sh\necho "Garbage Collect Script"',
    'assassinate-node.sh': '#!/bin/bash\n# Placeholder for assassinate-node.sh\necho "Assassinate Node Script"',
    'upgrade-sstables.sh': '#!/bin/bash\n# Placeholder for upgrade-sstables.sh\necho "Upgrade SSTables Script"',
    'backup-to-s3.sh': '#!/bin/bash\n# Placeholder for backup-to-s3.sh\necho "Backup to S3 Script"',
    'prepare-replacement.sh': '#!/bin/bash\n# Placeholder for prepare-replacement.sh\necho "Prepare Replacement Script"',
    'version-check.sh': '#!/bin/bash\n# Placeholder for version-check.sh\necho "Version Check Script"',
    'cassandra_range_repair.py': '#!/usr/bin/env python3\n# Placeholder for cassandra_range_repair.py\nprint("Cassandra Range Repair Python Script")',
    'range-repair.sh': '#!/bin/bash\n# Placeholder for range-repair.sh\necho "Range Repair Script"',
    'robust_backup.sh': '#!/bin/bash\necho "Robust Backup Script Placeholder"',
    'restore_from_backup.sh': '#!/bin/bash\necho "Restore from Backup Script Placeholder"',
    'node_health_check.sh': '#!/bin/bash\necho "Node Health Check Script Placeholder"',
    'rolling_restart.sh': '#!/bin/bash\necho "Rolling Restart Script Placeholder"',
  },
};
